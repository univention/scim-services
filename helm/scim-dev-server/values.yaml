# SPDX-License-Identifier: AGPL-3.0-only
# SPDX-FileCopyrightText: 2024 Univention GmbH

---

global:
  # -- Container registry address.
  imageRegistry: "artifacts.software-univention.de"

  # -- Credentials to fetch images from private registry.
  # Ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
  #
  # imagePullSecrets:
  #   - "docker-registry"
  imagePullSecrets: []

  # -- Define an ImagePullPolicy.
  #
  # Ref.: https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
  #
  imagePullPolicy: "IfNotPresent"
  secrets:
    masterPassword: null

scimDevServer:
  image:
    registry: ""
    repository: "nubus-dev/images/scim-dev-server"
    imagePullPolicy: ""
    tag: "latest"
    # -- Define image sha256 as an alternative to `tag`
    sha256: null
  config:
    # -- Hostname of the SCIM server
    hostname: null
  # -- Array with extra environment variables to add to containers.
  #
  # extraEnvVars:
  #   - name: FOO
  #     value: "bar"
  extraEnvVars: []

# -- Resource limits and requests for the container
resources:
  limits:
    memory: "256Mi"
  requests:
    cpu: "100m"
    memory: "128Mi"

# -- Security context for the container
containerSecurityContext:
  # -- Enable security context
  enabled: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - "ALL"
  privileged: false
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  seccompProfile:
    type: RuntimeDefault

# -- Liveness probe configuration
livenessProbe:
  # -- Enable liveness probe
  enabled: true
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10

# -- Readiness probe configuration
readinessProbe:
  # -- Enable readiness probe
  enabled: true
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
